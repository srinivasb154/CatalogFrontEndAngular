<div class="product-assets-container">
  <a [routerLink]="['/products']">Back to Product Options</a>
  <h2>Product Assets</h2>

  <form [formGroup]="assetsForm">
    <div class="form-group">
      <label for="category">Category</label>
      <select id="category" formControlName="categoryId">
        <option *ngFor="let category of categories" [value]="category._id">
          {{ category.categoryName }}
        </option>
      </select>

      <label for="brand">Brand</label>
      <select id="brand" formControlName="brandId">
        <option *ngFor="let brand of brands" [value]="brand._id">
          {{ brand.brandName }}
        </option>
      </select>

      <button type="button" (click)="fetchProducts()">Fetch Products</button>
    </div>

    <div class="form-group">
      <label for="product">Product</label>
      <select id="product" formControlName="productId">
        <option *ngFor="let product of products" [value]="product._id">
          {{ product.productName }}
        </option>
      </select>
    </div>
  </form>

  <button type="button" (click)="fetchAssets()">Fetch Assets</button>

  <table *ngIf="assets.length > 0">
    <thead>
      <tr>
        <th>Image</th>
        <th>Asset Id</th>
        <th>File Name</th>
        <th>Type</th>
        <th>Extension</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let asset of assets">
        <td>
          <img
            *ngIf="asset.type === 'Image' && asset.binaryData"
            [src]="getImageSrc(asset)"
            [alt]="asset.fileName"
            class="thumbnail"
          />
        </td>
        <td>{{ asset.productAssetId }}</td>
        <td>{{ asset.fileName }}</td>
        <td>{{ asset.type }}</td>
        <td>{{ asset.extension }}</td>
      </tr>
    </tbody>
  </table>

  <p *ngIf="errorMessage" class="error">{{ errorMessage }}</p>
</div>
